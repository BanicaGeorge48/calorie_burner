<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/styles.css">
  <title>Quemador de Calor√≠as</title>
</head>

<body>
  <main>
    <div class="wrapper">
      <details>
        <summary>
          ‚≠êÔ∏è explanation
        </summary>
        <p>The book, Convert Anything to Calories, concluded that, on average, a person with one finger
          index finger
          of
          10.8 cm^3 and weighing 11.7 grams will need a lot of clicks to hold the line. It takes 16.7 micromoles of
          adenosine
          triphosphate (the molecule that transports energy between cells) to move one gram of the body for one second.
          second,
          y
          as
          there are 7.3 calories in one mole (the measure of quantity of a substance) of adenosine triphosphate, in theory, each
          click
          of the
          mouse click should burn 1.42 calories. Although the calculation assumes the movement of the entire muscle, so that the
          amount
          actual amount may vary slightly.</p>
        <p>But it happens to be Saturday and you're hungry. thirty minutes later you get a pizza (1,835kCal) with a
          coke
          (97kCal), you'd have to do 1,360,563 clicks to burn off dinner. And since it's Saturday it will probably involve
          a few alcoholic
          alcoholic beverages: on a Gin & Tonic (120kCal) there are 84,507 clicks, and 131,690.14 for every beer you
          you consume. In other words, with
          words, with 427 clicks on average per day, the computer is not good exercise.
        </p>
      </details>
      <h1>Calorie Burners</h1>
      <p class="result" id="result"> You have burned 0.00 calories</p>
      
      <button id="burn" class="burn">üî•</button>

      <p class="remaining" id="remaining"> You have 1360563 clicks left </p>
    </div>
  </main>

  <script>
    const createStore = (reducer, initialState) => {
      let state = initialState;
      let updater = () => {};

      const getState = () => state;

      const dispatch = (action) => {
        state = reducer(state, action);
        updater();
      };

      const subscribe = (listener) => {
        updater = listener; 
      };

      return {
        getState,
        dispatch,
        subscribe,
      };
    };

    const reducer = (state, action) => {
      switch(action.type){
        case 'BURN' :
          return {
            calories: state.calories + 1.42,
            clicks: state.clicks - 1,
          };
        default:
          return state 
      }
    };

    const initialState = {
      calories: 0,
      clicks: 1360563,
    };

    const store = createStore(reducer, initialState); 
    // store.dispatch()
    // store.getState()
    // store.subscribe()

    store.subscribe(() => {
      console.log('ha cambiado algo en el store', store.getState());
      const state = store.getState();
      window.result.textContent = `You have burned ${state.calories.toFixed(2)} calories`;
      window.remaining.textContent = `You have ${state.clicks} clicks left`;
    });

    
    const burn = () => {
      store.dispatch({
        type: 'BURN',
      });
    };

    window.burn.addEventListener('click', burn);
  </script>
</body>

</html>